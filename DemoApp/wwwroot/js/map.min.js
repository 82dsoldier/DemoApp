function initMap(){map=new google.maps.Map(document.getElementById("map"),{mapTypeControl:!1,center:{lat:39.580745,lng:-119.723402},zoom:13});adh=new AutocompleteDirectionsHandler(map)}function AutocompleteDirectionsHandler(n){var r,u;this.map=n;this.originPlaceId=null;this.destinationPlaceId=null;this.travelMode="WALKING";var t=document.getElementById("origin-input"),i=document.getElementById("destination-input"),f=document.getElementById("mode-selector");this.directionsService=new google.maps.DirectionsService;this.directionsDisplay=new google.maps.DirectionsRenderer;this.directionsDisplay.setMap(n);r=new google.maps.places.Autocomplete(t,{placeIdOnly:!0});u=new google.maps.places.Autocomplete(i,{placeIdOnly:!0});this.setupPlaceChangedListener(r,"ORIG");this.setupPlaceChangedListener(u,"DEST");this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(t);this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(i);this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(f)}function centerMap(n,t){map.setCenter({lat:n,lng:t})}function dateAdd(n,t,i){var r=new Date(n),u=function(){r.getDate()!=n.getDate()&&r.setDate(0)};switch(t.toLowerCase()){case"year":r.setFullYear(r.getFullYear()+i);u();break;case"quarter":r.setMonth(r.getMonth()+3*i);u();break;case"month":r.setMonth(r.getMonth()+i);u();break;case"week":r.setDate(r.getDate()+7*i);break;case"day":r.setDate(r.getDate()+i);break;case"hour":r.setTime(r.getTime()+i*36e5);break;case"minute":r.setTime(r.getTime()+i*6e4);break;case"second":r.setTime(r.getTime()+i*1e3);break;default:r=undefined}return r}function formatTime(n){return n.getFullYear()+"/"+("0"+(n.getMonth()+1)).slice(-2)+"/"+("0"+n.getDate()).slice(-2)+" "+("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)}var tripTime,originId,destId,map,adh;AutocompleteDirectionsHandler.prototype.setupClickListener=function(n,t){var r=document.getElementById(n),i=this;r.addEventListener("click",function(){i.travelMode=t;i.route()})};AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener=function(n,t){var i=this;n.bindTo("bounds",this.map);n.addListener("place_changed",function(){var r=n.getPlace();if(!r.place_id){window.alert("Please select an option from the dropdown list.");return}t==="ORIG"?i.originPlaceId=r.place_id:i.destinationPlaceId=r.place_id;i.route()})};AutocompleteDirectionsHandler.prototype.route=function(){if(this.originPlaceId&&this.destinationPlaceId){var n=this;originId=this.originPlaceId;destId=this.destinationPlaceId;this.directionsService.route({origin:{placeId:this.originPlaceId},destination:{placeId:this.destinationPlaceId},travelMode:"DRIVING"},function(t,i){var r;if(i==="OK"){if(n.directionsDisplay.setDirections(t),r=$("#DepartureTime").val(),r.length>0){var u=new Date($("#DepartureTime").val()),f=dateAdd(u,"second",t.routes[0].legs[0].duration.value*2),e=formatTime(f),o=formatTime(dateAdd(u,"second",t.routes[0].legs[0].duration.value));$("#ReturnTime").val(e);$("#DeliveryTime").val(o)}tripTime=t.routes[0].legs[0].duration.value}else window.alert("Directions request failed due to "+i)})}};AutocompleteDirectionsHandler.prototype.centerMap=function(n,t){this.map.setCenter({lat:n,lng:t})};AutocompleteDirectionsHandler.prototype.clearRoute=function(){this.directionsDisplay.setDirections({routes:[]})};